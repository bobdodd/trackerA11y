<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrackerA11y Test Page</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
        }
        
        #test-link {
            position: absolute;
            top: 0;
            left: 0;
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 4px;
            font-size: 16px;
            z-index: 1000;
        }
        
        #test-link:hover {
            background-color: #0056b3;
        }
        
        .content {
            margin-top: 60px;
            padding: 20px;
            height: 2000px; /* Make page scrollable */
        }
        
        .test-element {
            position: absolute;
            background-color: #28a745;
            color: white;
            padding: 15px 25px;
            text-decoration: none;
            border-radius: 4px;
            font-size: 16px;
            font-weight: bold;
            border: 2px solid #1e7e34;
        }
        
        .test-element:hover {
            background-color: #218838;
        }
        
        .debug-info {
            position: fixed;
            bottom: 10px;
            right: 10px;
            background: #333;
            color: white;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            max-width: 300px;
        }
    </style>
</head>
<body>
    <a href="#clicked" id="test-link">TEST LINK (0,0)</a>
    
    <div class="content">
        <h1>TrackerA11y Coordinate Mapping Test</h1>
        <p>Click on the blue "TEST LINK (0,0)" at the top-left corner of the page.</p>
        <p>This link is positioned at absolute coordinates 0,0 within the browser content area.</p>
        
        <h2>Debug Information</h2>
        <ul>
            <li>Link position: top: 0px, left: 0px</li>
            <li>Link size: ~120px wide, ~40px tall</li>
            <li>Expected screen coordinates: window.screenLeft + 0, window.screenTop + 0</li>
        </ul>
        
        <h2>Test Elements at Known Positions</h2>
        <p>Scroll down to find more test elements at specific coordinates:</p>
        
        <!-- Element visible without scrolling -->
        <a href="#test1" class="test-element" id="test1" style="top: 150px; left: 100px;">
            TEST 1 at (100, 150)
        </a>
        
        <!-- Elements that require scrolling to see -->
        <a href="#test2" class="test-element" id="test2" style="top: 600px; left: 200px;">
            TEST 2 at (200, 600) - Scroll to see
        </a>
        
        <a href="#test3" class="test-element" id="test3" style="top: 900px; left: 300px;">
            TEST 3 at (300, 900) - Scroll more
        </a>
        
        <a href="#test4" class="test-element" id="test4" style="top: 1200px; left: 150px;">
            TEST 4 at (150, 1200) - Deep scroll
        </a>
        
        <a href="#test5" class="test-element" id="test5" style="top: 1500px; left: 400px;">
            TEST 5 at (400, 1500) - Bottom area
        </a>
        
        <div style="margin-top: 300px;">
            <h3>Instructions for Testing</h3>
            <ol>
                <li>First click "TEST LINK (0,0)" at the top - should work without scrolling</li>
                <li>Click "TEST 1 at (100, 150)" - visible without scrolling</li>
                <li>Scroll down and click "TEST 2 at (200, 600)" - requires some scrolling</li>
                <li>Scroll more and click "TEST 3 at (300, 900)" - requires more scrolling</li>
                <li>Continue testing with elements further down</li>
            </ol>
            
            <h3>Expected Behavior</h3>
            <p>When you click each test element, the coordinate mapping should:</p>
            <ul>
                <li>Show the correct scroll position in debug output</li>
                <li>Calculate correct viewport-relative coordinates</li>
                <li>Find the exact link element you clicked on (tagName: "A")</li>
                <li>Show the correct id and text content</li>
            </ul>
        </div>
    </div>
    
    <div class="debug-info">
        <div><strong>Window Info:</strong></div>
        <div id="window-info">screenLeft: 0<br>screenTop: 38<br>screenX: 0<br>screenY: 38<br>chrome: 80px<br>scroll: (0, 0)<br>inner: 971x839</div>
    </div>
    
    <script>
        // Display current window information
        function updateWindowInfo() {
            const info = {
                screenLeft: window.screenLeft || 0,
                screenTop: window.screenTop || 0,
                screenX: window.screenX || 0,
                screenY: window.screenY || 0,
                outerWidth: window.outerWidth,
                outerHeight: window.outerHeight,
                innerWidth: window.innerWidth,
                innerHeight: window.innerHeight,
                chrome: (window.outerHeight - window.innerHeight),
                scrollX: window.scrollX || window.pageXOffset || 0,
                scrollY: window.scrollY || window.pageYOffset || 0
            };
            
            document.getElementById('window-info').innerHTML = 
                `screenLeft: ${info.screenLeft}<br>` +
                `screenTop: ${info.screenTop}<br>` +
                `screenX: ${info.screenX}<br>` +
                `screenY: ${info.screenY}<br>` +
                `chrome: ${info.chrome}px<br>` +
                `scroll: (${info.scrollX}, ${info.scrollY})<br>` +
                `inner: ${info.innerWidth}x${info.innerHeight}`;
        }
        
        updateWindowInfo();
        setInterval(updateWindowInfo, 1000);
        
        // Log clicks on all test elements
        function logClick(elementId) {
            return function(e) {
                console.log(`${elementId} clicked!`, {
                    clientX: e.clientX,
                    clientY: e.clientY,
                    screenX: e.screenX,
                    screenY: e.screenY,
                    pageX: e.pageX,
                    pageY: e.pageY,
                    scrollX: window.scrollX || window.pageXOffset || 0,
                    scrollY: window.scrollY || window.pageYOffset || 0
                });
                e.preventDefault();
            };
        }
        
        // Add click handlers to all test elements
        document.getElementById('test-link').addEventListener('click', logClick('test-link'));
        document.getElementById('test1').addEventListener('click', logClick('test1'));
        document.getElementById('test2').addEventListener('click', logClick('test2'));
        document.getElementById('test3').addEventListener('click', logClick('test3'));
        document.getElementById('test4').addEventListener('click', logClick('test4'));
        document.getElementById('test5').addEventListener('click', logClick('test5'));
    </script>

</body></html>